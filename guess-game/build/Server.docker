FROM azul/zulu-openjdk:21
RUN apt-get update && \
    apt-get install -y --no-install-recommends net-tools mc && \
    rm -rf /var/lib/apt/lists/*
WORKDIR /var/guess-server
RUN mkdir -p demo
COPY src/demo/*.java demo/
RUN javac demo/*.java
RUN rm -f demo/*.java
ENV PORT=6969
ENTRYPOINT ["bash", "-c", "java demo.Server $PORT"]